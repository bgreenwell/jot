# rjot <img src="assets/logo-color.png" align="right" height="120" alt="rjot logo" />

A minimalist, command-line jotting utility that's fast, private, git-friendly, and written in Rust.

[![Build Status](https://github.com/bgreenwell/rjot/actions/workflows/rust.yml/badge.svg)](https://github.com/bgreenwell/rjot/actions)
[![Crates.io](https://img.shields.io/crates/v/rjot.svg?label=crates.io)](https://crates.io/crates/rjot)
[![License: MIT](https://img.shields.io/badge/License-MIT-yellow.svg)](https://opensource.org/licenses/MIT)

---

## The vision

`rjot` is a tool for capturing thoughts at the speed of typing. It's built on a few core principles:

* **CLI-first, not CLI-only**: The terminal is the most powerful and frictionless interface for capturing text. `rjot` is designed to be a first-class citizen of your command line.
* **Plain text is sacred**: Your data is just a folder of Markdown files. It will always be readable, editable, and portable with or without `rjot`. No proprietary formats, no databases, no lock-in.
* **You own your data**: `rjot` will never push you to a proprietary sync service. It's designed from the ground up to empower you with control over your own data.

This project aims to be the perfect, minimalist companion for developers, writers, and anyone who lives in the terminal.

## Features

* **Instant capture**: Jot down a thought instantly from the command line.
* **Multiple Notebooks**: Organize your jots into different notebooks (e.g., work, personal, project-x).
* **Editor integration**: Use `rjot new` to open your favorite editor (`$EDITOR`) for longer-form entries with template support.
* **Powerful search & filtering**: Full-text search, tag-based filtering, and time-based views (`today`, `week`, `on <date>`, or `on <date-from>...<date-to>`). All commands operate on the active notebook.
* **Note management**: Easily `show`, `edit`, `tag`, or `delete` any note using a unique ID prefix or its recency (`--last` or `--last=3`).
* **Standard & configurable**: Follows platform-specific conventions for data storage and respects standard environment variables.

## Installation

### From crates.io (recommended)

This method automatically downloads, compiles, and installs `rjot` on your system.

1.  **Install the Rust toolchain**

    If you don't already have it, install Rust from the official site: [rustup.rs](https://rustup.rs/).

2.  **Install `rjot`**

    ```sh
    cargo install rjot
    ```
    This will place the `rjot` executable in your cargo binary path (usually `~/.cargo/bin/`), making it available from anywhere in your terminal.

### From source

To build the very latest version directly from the source code:
```sh
git clone https://github.com/bgreenwell/rjot.git
cd rjot
cargo install --path .
```

---

## Usage guide

### A note on shells and quotes

Your command-line shell (like Bash or Zsh) can interpret special characters like `!` or expand variables like `$USER` inside double quotes (`"`). This can cause unexpected behavior.

**The best practice is to always use single quotes (`'`) for your messages.** This tells the shell to treat every character literally.

```sh
# GOOD: This works perfectly.
❯ rjot 'This is a great idea!'

# BAD: This will probably fail!
❯ rjot "This is a great idea!"

# OK (with escaping): If you must use double quotes, escape special characters.
❯ rjot "Note for user: $USER. This is a great idea\!"
```

### Working with Notebooks

`rjot` allows you to organize your notes into separate "notebooks." Each notebook is a distinct collection of jots. By default, all notes go into a notebook named `default`.

**1. Creating a new notebook:**
```sh
❯ rjot notebook new work
# Successfully created notebook 'work' at ".../rjot/notebooks/work"
```
You can also use the alias `nb`:
```sh
❯ rjot nb new personal-projects
```

**2. Listing available notebooks:**
```sh
❯ rjot notebook list
# Available notebooks:
#   - default
#   - personal-projects
#   - work
```

**3. Setting the active notebook for your current shell session:**
The `use` command prints instructions to set an environment variable (`RJOT_ACTIVE_NOTEBOOK`). This makes all subsequent `rjot` commands in that terminal session operate on the specified notebook.
```sh
❯ rjot notebook use work
# To activate the notebook 'work', run the following command in your shell:
# For bash/zsh:
#   export RJOT_ACTIVE_NOTEBOOK="work"
# For fish:
#   set -x RJOT_ACTIVE_NOTEBOOK="work"
# For PowerShell:
#   $env:RJOT_ACTIVE_NOTEBOOK = "work"
# For Windows CMD:
#   set RJOT_ACTIVE_NOTEBOOK=work
#
# Run `rjot info --paths` to verify the change after setting the variable.

# After running the appropriate export/set command:
❯ export RJOT_ACTIVE_NOTEBOOK="work"
❯ rjot 'A new note for my work notebook' # This goes into 'work'
```

**4. Operating on a specific notebook for a single command:**
Use the global `--notebook-opt <name>` flag (or `--notebook` for short, though `--notebook-opt` is the canonical name generated by the CLI library) to target a different notebook without changing the active one.
```sh
# Assuming 'work' is still your active notebook from above
❯ rjot 'This is a personal note' --notebook-opt personal-projects

❯ rjot list --notebook-opt default # List notes from the default notebook
```

**5. Showing the path to a notebook:**
```sh
❯ rjot notebook path work
# Outputs the full path to the 'work' notebook directory

❯ rjot notebook path
# Outputs the full path to the currently active notebook's directory
```

All other `rjot` commands (like `new`, `list`, `find`, `today`, etc.) will operate on the currently active notebook (either `default`, the one set by `RJOT_ACTIVE_NOTEBOOK`, or the one specified by a one-time `--notebook-opt` flag).

### Creating notes

**1. Jot down a quick note (the default action):**
This goes into the active notebook.
```sh
❯ rjot 'This is a quick thought I want to save.'
```

**2. Create a tagged, one-liner note:**
The `--tags` (or `-t`) flag accepts space-separated or comma-separated values.
```sh
❯ rjot 'A great idea for the project' --tags project rust
# or
❯ rjot 'Another idea' -t project,rust
```

**3. Create a longer note in your editor:**
This also respects the active notebook.
```sh
# This opens your default $EDITOR
❯ rjot new

# Use a custom template for structured notes
❯ rjot new --template meeting.md
```

### Viewing and filtering notes

These commands operate on the active notebook.

**1. List a specific number of recent notes:**
```sh
❯ rjot list
❯ rjot list 5
```

**2. Full-text search of all notes:**
```sh
❯ rjot find 'productivity'
```

**3. Filter by one or more tags:**
```sh
❯ rjot tags project
❯ rjot tags rust,cli
```

**4. View notes from a specific time:**
```sh
❯ rjot today
❯ rjot yesterday
❯ rjot week
❯ rjot on 2025-05-20
❯ rjot on 2025-05-01..2025-05-31
```

**5. Compile notes into a summary:**
```sh
❯ rjot week --compile > weekly-summary.md
```

### Managing specific notes

These commands operate on the active notebook.

**1. Show the full content of a note:**
```sh
❯ rjot show 2025-06-08-1345
❯ rjot show --last
```

**2. Edit a note:**
```sh
❯ rjot edit --last=3
```

**3. Delete a note:**
```sh
❯ rjot delete 2025-06-08-1345
❯ rjot delete --last --force
```

### Managing tags

This command operates on notes within the active notebook.
```sh
❯ rjot tag add --last=1 rust,idea
❯ rjot tag rm -p 2025-06-09 idea
❯ rjot tag set --last=2 archived
```

### Utility commands

Get info about your setup:
```sh
❯ rjot info --paths
# Shows root directory, active notebook directory, all notebooks root, templates path, and RJOT_ACTIVE_NOTEBOOK status.

❯ rjot info --stats
# Shows note and tag statistics for the active notebook.
```

### Git integration (optional)

Git integration works at the root `rjot` directory level, meaning your entire collection of notebooks will be version-controlled together in a single repository.

#### One-time setup

1.  **Initialize `rjot` with Git:**
    This command prepares your `rjot` data directory and initializes a Git repository inside it.
    ```sh
    ❯ rjot init --git
    ```

2.  **Create a private remote repository:**
    Go to GitHub (or another Git provider) and create a new, empty **private** repository (e.g., named `my-journal`). Do not add a README or license file.

3.  **Link the remote:**
    Navigate into your `rjot` directory (`rjot info --paths` will show you where) and add the remote you just created.
    ```sh
    # Example for GitHub over SSH
    ❯ git remote add origin git@github.com:YOUR_USERNAME/my-journal.git

    # Example for GitHub over HTTPS
    ❯ git remote add origin [https://github.com/YOUR_USERNAME/my-journal.git](https://github.com/YOUR_USERNAME/my-journal.git)
    ```

#### The `sync` command

Once set up, you can use the `sync` command from anywhere to save your work.
This stages all changes across all notebooks, commits, and pushes.
```sh
❯ rjot sync
```

#### How authentication works (Unchanged)
#### Encryption (optional) (Unchanged)

**One-time setup:**
```sh
❯ rjot init --encrypt
```
Encryption applies to all notes in all notebooks.
    
**IMPORTANT:** You must back up the `identity.txt` file somewhere safe. If you lose it, your notes cannot be recovered. The `.gitignore` file created by `rjot init --git` will prevent this file from being committed.

**How it works:**

After running `init --encrypt`, every new or edited note will be automatically encrypted when saved and decrypted when read. The process is completely transparent.

**Turning off encryption:**
```sh
# This decrypts all notes across all notebooks and remove the key files
❯ rjot decrypt
```
## Configuration

### File storage location

The root `rjot` directory (which contains configuration, templates, and the `notebooks` parent directory) respects platform conventions:

* **macOS:** `~/Users/<YourUsername>/Library/Application Support/rjot/`
* **Linux:** `~/.config/rjot/`
* **Windows:** `C:\Users\<YourUsername>\AppData\Roaming\rjot\`

You can override this by setting the `$RJOT_DIR` environment variable.
Individual notes are stored in: `$RJOT_DIR/notebooks/<notebook_name>/<note_file.md>`.
The default notebook is: `$RJOT_DIR/notebooks/default/`.

### Templates (Unchanged)
### Pro-tip: create a personal alias (Unchanged)

Here’s how to set it up for your specific operating system:

#### For macOS and Linux (zsh or bash)

1.  **Identify your shell's config file:**
    * If you're on a modern Mac, you are likely using `zsh`, so the file is `~/.zshrc`.
    * On most Linux distributions, you are likely using `bash`, so the file is `~/.bashrc`.

2.  **Add the alias to the file:**
    Run the following command in your terminal.

    ```sh
    # For zsh (macOS) or bash (Linux)
    echo "alias jd='rjot'" >> ~/.zshrc # Or ~/.bashrc
    ```

3.  **Apply the changes:**
    For the changes to take effect, either close and reopen your terminal, or run `source ~/.zshrc` (or `source ~/.bashrc`).

#### For Windows (PowerShell)

1.  **Check for (or create) a profile file:**

    ```powershell
    if (!(Test-Path $PROFILE)) { New-Item -Path $PROFILE -Type File -Force }
    ```

2.  **Add the alias to your profile:**

    ```powershell
    Add-Content -Path $PROFILE -Value "function jd { rjot.exe @args }"
    ```

3.  **Apply the changes:**
    Close and reopen your PowerShell window, or run `. $PROFILE`.

## Roadmap

`rjot` is under active development. The next major step is to implement the "power features":

* [x] **Git integration**
* [x] **Encryption**
* [x] **Multiple Notebooks**
* [ ] **Reminders**: `rjot remind` to set system-level notifications (e.g., `rjot remind me in 1 hour to...`).

## Contributing

This project is open source and contributions are welcome! Please feel free to open an issue or submit a pull request.

## License

This project is licensed under the **MIT License**.